<div *ngIf="isLoginMode">
<div *ngIf="!loading;else spinner" class="mt-5 mr-2 ml-2" style="color:white;">
    <div class='d-flex justify-content-center'>
        <div style="width: 500px; background-color: rgba(0, 0, 0, 0.7);" class="jumbotron">
          <h1>Login</h1><hr style="background-color: white;">
         <div class="mt-3 form-group">
             <form [formGroup]="formGrp" (ngSubmit)="onLogin()">
                 <div [@inputState]>
                   <div class="input-group mb-3">
                     <div class="input-group-prepend">
                       <span style="border-color:wheat;background-color:white;" 
                       class="input-group-text" id="basic-addon1">
                       <svg class="bi bi-envelope-fill" 
                       width="1em" height="1em" 
                       viewBox="0 0 16 16" 
                       fill="currentColor" 
                       xmlns="http://www.w3.org/2000/svg">
                     <path d="M.05 3.555L8 8.414l7.95-4.859A2 2 0 0014 2H2A2 2 0 00.05 3.555zM16 4.697l-5.875 3.59L16 11.743V4.697zm-.168 8.108L9.157 8.879 8 9.586l-1.157-.707-6.675 3.926A2 2 0 002 14h12a2 2 0 001.832-1.195zM0 11.743l5.875-3.456L0 4.697v7.046z"/>
                       </svg>
                     </span>
                     </div>
                     <input [ngStyle]="{'border-color': formGrp.get('email').hasError('email') && formGrp.get('email').touched || formGrp.get('email').hasError('required') && formGrp.get('email').touched ? 'red' : 'white'}" formControlName="email" style="color:white;background-color: transparent" type="email" class="form-control" placeholder="Email">
                   </div>
 
                   <p [@messageState] *ngIf="formGrp.get('email').hasError('email') && formGrp.get('email').touched" style="color:red;">** Enter a valid email **</p>
                   <p [@messageState] *ngIf="formGrp.get('email').hasError('required') && formGrp.get('email').touched" style="color:red;">** Required **</p>
                   
                   <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span style="border-color:wheat;background-color:white;" 
                       class="input-group-text" id="basic-addon1">
                       <svg class="bi bi-lock-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <rect width="11" height="9" x="2.5" y="7" rx="2"/>
                        <path fill-rule="evenodd" d="M4.5 4a3.5 3.5 0 117 0v3h-1V4a2.5 2.5 0 00-5 0v3h-1V4z" clip-rule="evenodd"/>
                      </svg>
                     </span>
                    </div>
                    <input [ngStyle]="{'border-color': formGrp.get('password').hasError('required') && formGrp.get('password').touched ? 'red' : 'white'}" formControlName="password" style="color:white;background-color: transparent" type="password" class="form-control" placeholder="Password">
                  </div>

                   <p [@messageState] *ngIf="formGrp.get('password').hasError('required') && formGrp.get('password').touched" style="color:red;">** Required **</p>
                 </div>
 
                 <div [@btnState] class="mt-4 d-flex flex-md-row flex-column">
                     <button [disabled]="!formGrp.valid" type="submit" class="btn btn-success mr-md-2 mr-0">Login</button>
                     <button (click)="isLoginMode=!isLoginMode" type="button" class=" btn btn-info mt-2 mt-md-0">Switch to signup</button>
                 </div>
             </form>
         </div>
        </div>
    </div>
 </div>
</div>

<div *ngIf="!isLoginMode">
  <div *ngIf="!loading;else spinner" class="mt-5 mr-2 ml-2" style="color:white;">
    <div class='d-flex justify-content-center'>
        <div style="width: 500px; background-color: rgba(0, 0, 0, 0.7);" class="jumbotron">
          <h1>SignUp</h1><hr style="background-color: white;">
         <div class="mt-3 form-group">
             <form [formGroup]="signUpForm" (ngSubmit)="onSignup()">
                 <div [@inputState]>
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span style="border-color:white;background-color:white;" 
                      class="input-group-text" id="basic-addon1">
                      <svg class="bi bi-person-fill" 
                      width="1em" height="1em" 
                      viewBox="0 0 16 16" fill="currentColor" 
                      xmlns="http://www.w3.org/2000/svg">
                     <path fill-rule="evenodd" 
                     d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 100-6 3 3 0 000 6z" 
                     clip-rule="evenodd"/>
                      </svg>
                    </span>
                    </div>
                    <input [ngStyle]="{'border-color': signUpForm.get('name').hasError('required') && signUpForm.get('name').touched ? 'red' : 'white'}"formControlName="name" style="color:white;background-color: transparent" 
                    type="text" class="form-control" 
                    placeholder="Username" >
                  </div>
                  <p [@messageState] *ngIf="signUpForm.get('name').hasError('required') && signUpForm.get('name').touched" style="color:red;">** Required **</p>
                  <div class="mb-1">
                  <div class="input-group">
                     <div class="input-group-prepend">
                       <span style="border-color:wheat;background-color:white;" 
                       class="input-group-text" id="basic-addon1">
                       <svg class="bi bi-envelope-fill" 
                       width="1em" height="1em" 
                       viewBox="0 0 16 16" 
                       fill="currentColor" 
                       xmlns="http://www.w3.org/2000/svg">
                     <path d="M.05 3.555L8 8.414l7.95-4.859A2 2 0 0014 2H2A2 2 0 00.05 3.555zM16 4.697l-5.875 3.59L16 11.743V4.697zm-.168 8.108L9.157 8.879 8 9.586l-1.157-.707-6.675 3.926A2 2 0 002 14h12a2 2 0 001.832-1.195zM0 11.743l5.875-3.456L0 4.697v7.046z"/>
                       </svg>
                     </span>
                     </div>
                     <input [ngStyle]="{'border-color': signUpForm.get('email').hasError('email') && signUpForm.get('email').touched || signUpForm.get('email').hasError('required') && signUpForm.get('email').touched ? 'red' : 'white'}" formControlName="email" style="color:white;background-color: transparent" type="email" class="form-control" placeholder="Email">
                    </div> 
                     <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                   </div>
                  
                   <p [@messageState] *ngIf="signUpForm.get('email').hasError('email') && signUpForm.get('email').touched" style="color:red;">** Enter a valid email **</p>
                   <p [@messageState] *ngIf="signUpForm.get('email').hasError('required') && signUpForm.get('email').touched" style="color:red;">** Required **</p>
                   
                   <div class="mb-1">
                   <div class="input-group">
                    <div class="input-group-prepend">
                        <span style="border-color:wheat;background-color:white;" 
                       class="input-group-text" id="basic-addon1">
                       <svg class="bi bi-lock-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <rect width="11" height="9" x="2.5" y="7" rx="2"/>
                        <path fill-rule="evenodd" d="M4.5 4a3.5 3.5 0 117 0v3h-1V4a2.5 2.5 0 00-5 0v3h-1V4z" clip-rule="evenodd"/>
                      </svg>
                     </span>
                    </div>
                    <input [ngStyle]="{'border-color': signUpForm.get('password').hasError('required') && signUpForm.get('password').touched ? 'red' : 'white'}" formControlName="password" style="color:white;background-color: transparent" type="password" class="form-control" placeholder="Password">
                  </div>
                    <small id="passwordHelp" class="form-text text-muted">Password should contain atleast 6 characters.</small>
                  </div>        
                  <p [@messageState] *ngIf="signUpForm.get('password').hasError('minlength') && signUpForm.get('password').touched" style="color:red;">** Password should contain atleast 6 characters **</p> 
                  <p [@messageState] *ngIf="signUpForm.get('password').hasError('required') && signUpForm.get('password').touched" style="color:red;">** Required **</p>
                 </div>
 
                 <div [@btnState] class="mt-4 d-flex flex-md-row flex-column">
                     <button [disabled]="!signUpForm.valid" type="submit" class="btn btn-success mr-md-2 mr-0">SignUp</button>
                     <button type="button" (click)="isLoginMode=!isLoginMode" class=" btn btn-info mt-2 mt-md-0">Switch to Login</button>
                 </div>
             </form>
         </div>
        </div>
    </div>
 </div>
</div>

 <ng-template #spinner>
  <div class="dflex justify-content-center">
      <app-spinner></app-spinner>
  </div>
  </ng-template>
  
  <ng-template alert-directive>
      <alert-comp [message]="message" (closeEvent)="displayMessage()"></alert-comp>
  </ng-template>
